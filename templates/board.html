<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>üìã –î–æ—Å–∫–∞ –û–±—ä—è–≤–ª–µ–Ω–∏–π</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <div class="container">
        <h1>üìã –î–û–°–ö–ê –û–ë–™–Ø–í–õ–ï–ù–ò–ô</h1>

        <p>–í–æ–∑—å–º–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –∏ –æ—Ç–º–µ—Ç—å—Ç–µ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º, –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ.</p>

        {% if 'username' not in session %}
        <p><a href="/login">–í–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã –±—Ä–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è.</p>
        {% endif %}

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ó–ê–î–ê–ù–ò–ï</th>
                    <th>–°–õ–û–ñ–ù–û–°–¢–¨</th>
                    <th>–°–¢–ê–¢–£–°</th>
                    <th>–í–ó–Ø–õ</th>
                    <th>–í–ó–Ø–¢</th>
                    <th>–í–´–ü–û–õ–ù–ï–ù</th>
                    <th>–î–ï–ô–°–¢–í–ò–ï</th>
                </tr>
            </thead>
            <tbody>
                {% for task in board %}
                {% if task.status != 'done' %}
                <tr>
                    <td>{{ task.id }}</td>
                    <td>{{ task.text }}</td>
                    <td class="difficulty-{{ task.difficulty|lower }}">{{ task.difficulty }}</td>
                    <td class="status-{{ task.status }}">{{ task.status|title }}</td>
                    <td>{{ task.user or '-' }}</td>
                    <td>{{ task.taken_at or '-' }}</td>
                    <td>{{ task.done_at or '-' }}</td>
                    <td>
                        {% if task.status == 'free' and 'username' in session %}
                        <form class="form-inline" method="post" action="/board/take/{{ task.id }}">
                            <!-- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
                            <input type="hidden" name="username" value="{{ session.username }}">
                            <button type="submit">–í–ó–Ø–¢–¨</button>
                        </form>
                        {% elif task.status == 'taken' and task.user == session.get('username') %}
                        <form class="form-inline" method="post" action="/board/done/{{ task.id }}">
                            <button type="submit">‚úÖ –í–´–ü–û–õ–ù–ï–ù–û</button>
                        </form>
                        {% elif task.status == 'taken' %}
                        –ó–∞–Ω—è—Ç–æ: {{ task.user }}
                        {% else %}
                        ‚Äî
                        {% endif %}
                    </td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>

        <br>
        <a href="/">‚Üê –ù–ê–ó–ê–î</a> | <a href="/archive">üìã –ê–†–•–ò–í</a>
        {% if 'username' in session %}
        | <a href="/logout">üö™ –í–´–ô–¢–ò ({{ session.username }})</a>
        {% endif %}
    </div>
</body>
</html>
