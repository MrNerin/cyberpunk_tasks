<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - TaskFlow</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="app-container">
        <header class="nav-bar">
            <div>
                <h1 class="title">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
                <p class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</p>
            </div>

            <div class="nav-links">
                <div class="user-info">
                    <div class="user-avatar">A</div>
                    <span>{{ session.username }} (admin)</span>
                </div>
                <a href="/" class="btn btn-outline">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <a href="/logout" class="btn">–í—ã–π—Ç–∏</a>
            </div>
        </header>

        <form method="POST" action="/admin/save">
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ -->
            <section class="panel">
                <h2 class="section-title">üìù –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
                </p>

                {% for btn_name, btn_label in [('button1', '–ì—Ä—É–ø–ø–∞ –∑–∞–¥–∞—á 1'), ('button2', '–ì—Ä—É–ø–ø–∞ –∑–∞–¥–∞—á 2'), ('button3', '–ì—Ä—É–ø–ø–∞ –∑–∞–¥–∞—á 3')] %}
                <div style="margin-bottom: 24px;">
                    <h3 style="color: var(--text-accent); margin-bottom: 12px;">{{ btn_label }}</h3>
                    {% for task in tasks[btn_name] %}
                    <div class="card">
                        <input type="text" name="{{ btn_name }}[]" value="{{ task }}" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ">
                    </div>
                    {% endfor %}
                    <div class="card">
                        <input type="text" name="{{ btn_name }}[]" class="form-input" placeholder="–ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ">
                    </div>
                </div>
                {% endfor %}
            </section>

            <!-- –î–æ—Å–∫–∞ –∑–∞–¥–∞—á -->
            <section class="panel">
                <h2 class="section-title">üìã –î–æ—Å–∫–∞ –∑–∞–¥–∞—á</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –æ–±—â—É—é –¥–æ—Å–∫—É
                </p>

                <div id="board-tasks">
                    <div class="card">
                        <div style="display: flex; gap: 12px;">
                            <input type="text" name="board_tasks[]" class="form-input" placeholder="–¢–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è">
                            <select name="board_difficulties[]" class="form-input" style="min-width: 120px;">
                                <option value="–ª—ë–≥–∫–∞—è">–õ—ë–≥–∫–∞—è</option>
                                <option value="—Å—Ä–µ–¥–Ω—è—è" selected>–°—Ä–µ–¥–Ω—è—è</option>
                                <option value="—Å–ª–æ–∂–Ω–∞—è">–°–ª–æ–∂–Ω–∞—è</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn btn-outline" onclick="addBoardTask()" style="margin-top: 12px;">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ
                </button>
            </section>

            <!-- –î–µ–π—Å—Ç–≤–∏—è -->
            <section class="panel">
                <h2 class="section-title">‚ö° –î–µ–π—Å—Ç–≤–∏—è</h2>
                <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                    <button type="submit" class="btn btn-success">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    <button type="button" class="btn" onclick="generateDailyTasks()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</button>
                </div>
            </section>
        </form>
    </div>

    <script>
        function addBoardTask() {
            const container = document.getElementById('board-tasks');
            const newTask = document.createElement('div');
            newTask.className = 'card';
            newTask.innerHTML = `
                <div style="display: flex; gap: 12px;">
                    <input type="text" name="board_tasks[]" class="form-input" placeholder="–¢–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è">
                    <select name="board_difficulties[]" class="form-input" style="min-width: 120px;">
                        <option value="–ª—ë–≥–∫–∞—è">–õ—ë–≥–∫–∞—è</option>
                        <option value="—Å—Ä–µ–¥–Ω—è—è" selected>–°—Ä–µ–¥–Ω—è—è</option>
                        <option value="—Å–ª–æ–∂–Ω–∞—è">–°–ª–æ–∂–Ω–∞—è</option>
                    </select>
                    <button type="button" class="btn btn-outline" onclick="this.parentElement.parentElement.remove()">üóëÔ∏è</button>
                </div>
            `;
            container.appendChild(newTask);
        }

        function generateDailyTasks() {
            fetch('/mark_daily_done', { method: 'POST' })
                .then(() => {
                    alert('–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!');
                    location.reload();
                });
        }
    </script>
</body>
</html>
